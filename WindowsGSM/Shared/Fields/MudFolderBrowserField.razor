@inherits MudTextField<string>
@inject IDialogService DialogService

@{
    base.BuildRenderTree(__builder);
}

@code {
    [Parameter]
    public IConfig Config { get; set; } = null!;

    private DialogOptions _options = new DialogOptions
    {
        MaxWidth = MaxWidth.Large,
        FullWidth = true,
        CloseButton = true,
        CloseOnEscapeKey = true,
    };

    protected override void OnInitialized()
    {
        //base.AdornmentIcon = Icons.Filled.FolderOpen;
        //base.Adornment = Adornment.End;
        base.OnAdornmentClick = EventCallback.Factory.Create<MouseEventArgs>(this, OnFolderClick);
    }

    private void OnFolderClick(MouseEventArgs args)
    {
        DialogParameters parameters = new();
        parameters.Add("Config", Config);
        parameters.Add("DefaultDirectory", Value);

        IDialogReference dialogReference = DialogService.Show<MudFolderBrowserDialog>("Browser For Folder", parameters, _options);
    }
}
